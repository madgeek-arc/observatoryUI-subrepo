<div class="uk-section-default uk-section uk-section-small uk-padding-remove-bottom" style="min-height: calc(100svh - var(--header-height));">
  <div class="uk-container uk-container-small">

    <div class="uk-card uk-card-body uk-card-default">
      <h5 class="uk-flex uk-flex-middle">Personal details
        <a class="material-icons uk-margin-small-left" title="Edit details" (click)="edit = true;">mode_edit</a>
      </h5>
      <div *ngIf="!edit; else editMode" class="uk-animation-scale-up" uk-grid>
        <div class="uk-width-2-3">
          <div class="uk-margin-small">
            <span>Name: </span><span>{{userInfo.user.name}}</span>
          </div>
          <div class="uk-margin-small">
            <span>Surname: </span><span>{{userInfo.user.surname}}</span>
          </div>
          <div class="uk-margin-small">
            <span>Email: </span><span>{{userInfo.user.email}}</span>
          </div>
          <div class="uk-margin-small">
            <span>Position: </span>
            <span>{{userInfo.user.profile.position ? userInfo.user.profile.position : '--'}}</span>
          </div>
          <div class="uk-margin-small">
            <span>Affiliation: </span>
            <span>{{userInfo.user.profile.affiliation ? userInfo.user.profile.affiliation : '--'}}</span>
          </div>
        </div>
        <div class="uk-width-1-3">
          <img class="uk-align-right" style="height: 100%; width: 100%; object-fit: contain; border-radius: 50%"
               [src]="'data:image;base64,' + userInfo.user.profile.picture | safeUrl:'resourceUrl'">
        </div>
      </div>

      <ng-template #editMode >
        <div class="uk-animation-scale-up">
          <form class="uk-form-horizontal uk-margin-medium">

            <div class="uk-margin">
              <label class="uk-form-label">Name</label>
              <div class="uk-form-controls match-height uk-flex uk-flex-middle">
                <span class="uk-margin-small-left">{{userInfo.user.name}}</span>
              </div>
            </div>

            <div class="uk-margin">
              <label class="uk-form-label">Surname</label>
              <div class="uk-form-controls match-height uk-flex uk-flex-middle">
                <span class="uk-margin-small-left">{{userInfo.user.surname}}</span>
              </div>
            </div>

            <div class="uk-margin">
              <label class="uk-form-label">Email</label>
              <div class="uk-form-controls match-height uk-flex uk-flex-middle">
                <span class="uk-margin-small-left">{{userInfo.user.email}}</span>
              </div>
            </div>

            <div class="uk-margin">
              <label class="uk-form-label" for="position">Position</label>
              <div class="uk-form-controls">
                <input class="uk-input" name="position" id="position" type="text" placeholder="Position"
                       [(ngModel)]="userInfo.user.profile.position">
              </div>
            </div>

            <div class="uk-margin">
              <label class="uk-form-label" for="affiliation">Affiliation</label>
              <div class="uk-form-controls">
                <input class="uk-input" name="affiliation" id="affiliation" type="text" placeholder="Affiliation"
                       [(ngModel)]="userInfo.user.profile.affiliation">
              </div>
            </div>

            <div class="uk-margin uk-flex uk-flex-middle" >
              <label class="uk-form-label" for="avatar">Choose a profile picture:</label>
              <input type="file" id="avatar" name="avatar" accept="image/png, image/jpeg" #fileSelect
                     (change)="onFileSelect($event)" style="display: none">
              <div class="uk-margin-small-left uk-flex uk-flex-middle">
                <a class="material-icons md-36" (click)="fileSelect.click()">upload_file</a>
                <span>{{image?.name ? image.name : 'No file selected.'}}</span>
              </div>
            </div>

<!--            <div class="uk-flex uk-flex-around">-->
<!--              <div class="uk-width-1-3">-->
<!--                <img *ngIf="imageSrc" [src]="imageSrc" alt="uploaded image" style='height: 100%; width: 100%; object-fit: contain'>-->
<!--              </div>-->
<!--            </div>-->

            <div class="uk-margin uk-flex uk-flex-right">
              <button type="button" class="uk-button uk-button-primary" (click)="updateProfile()">Save</button>
            </div>

          </form>
        </div>
      </ng-template>

    </div>
<!--    <pre>{{userInfo.user | json}}</pre>-->

  </div>
</div>
