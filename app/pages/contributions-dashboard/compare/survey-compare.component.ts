import {Component, OnInit} from "@angular/core";
import {Model} from "../../../../catalogue-ui/domain/dynamic-form-model";
import {SurveyAnswer} from "../../../domain/survey";
import {SurveyService} from "../../../services/survey.service";
import {zip} from "rxjs/internal/observable/zip";

@Component({
  selector: 'app-survey-compare',
  templateUrl: 'survey-compare.component.html'
})

export class SurveyCompareComponent implements OnInit {

  model: Model = null;
  subType: string;
  surveyAnswerA: SurveyAnswer = {"id":"sa-XjPACycS","surveyId":"m-jJFKmsXb","stakeholderId":"sh-country-GR","type":"country","answer":{"Practices":{"Question54":{"Question54-0":"No","Question54-1":null},"Question55":{"Question55-0":"1","Question55-3":null},"Question56":{"Question56-0":"1.1","Question56-1":"Yes"},"Question57":{"Question57-0":null,"Question57-1":null,"Question57-2":null},"Question58":{"Question58-0":null,"Question58-1":null},"Question59":{"Question59-0":null,"Question59-3":null},"Question60":{"Question60-0":null,"Question60-1":null},"Question61":{"Question61-0":null,"Question61-1":null,"Question61-2":null},"Question62":{"Question62-0":null,"Question62-1":null},"Question63":{"Question63-0":null,"Question63-3":null},"Question64":{"Question64-0":null,"Question64-1":null},"Question65":{"Question65-0":null,"Question65-1":null,"Question65-2":null},"Question67":{"Question67-0":null,"Question67-3":null},"Question68":{"Question68-0":null,"Question68-1":null},"Question69":{"Question69-0":null,"Question69-1":null,"Question69-2":null},"Question70":{"Question70-0":null,"Question70-1":null},"Question71":{"Question71-0":null,"Question71-3":null},"Question72":{"Question72-0":null,"Question72-1":null},"Question73":{"Question73-0":null,"Question73-1":null,"Question73-2":null},"Question74":{"Question74-0":null,"Question74-1":null},"Question75":{"Question75-0":null,"Question75-3":null},"Question76":{"Question76-0":null,"Question76-1":null},"Question77":{"Question77-0":null,"Question77-1":null,"Question77-2":null},"Question78":{"Question78-0":null,"Question78-1":null},"Question79":{"Question79-0":null,"Question79-3":null},"Question80":{"Question80-0":null,"Question80-1":null},"Question81":{"Question81-0":null,"Question81-1":null,"Question81-2":null},"Question82":{"Question82-0":null,"Question82-1":null},"Question83":{"Question83-0":null,"Question83-3":null},"Question84":{"Question84-0":null,"Question84-1":null},"Question85":{"Question85-0":null,"Question85-1":null},"Question86":{"Question86-0":null,"Question86-1":null},"Question87":{"Question87-0":null,"Question87-3":null},"Question88":{"Question88-0":null,"Question88-1":null},"Question89":{"Question89-0":null,"Question89-1":null,"Question89-2":null},"Question90":{"Question90-0":null,"Question90-1":null},"Question91":{"Question91-0":null,"Question91-3":null},"Question92":{"Question92-0":null,"Question92-1":null},"Question93":{"Question93-0":null,"Question93-1":null},"Question94":{"Question94-0":null,"Question94-1":null},"Question95":{"Question95-0":null,"Question95-3":null},"Question96":{"Question96-0":null,"Question96-1":null},"Question97":{"Question97-0":"Yes","Question97-1":null,"Question97-2":null},"Question98":{"Question98-0":null,"Question98-1":null},"Question99":{"Question99-0":null,"Question99-3":null},"Question100":{"Question100-0":null,"Question100-1":null},"Question101":{"Question101-0":null,"Question101-1":null}},"Policies":{"Question6":{"Question6-0":"Yes","Question6-1-0":{"Question6-1":"Yes","Question6-2":"Yes","Question6-2-1":["test","test","tost","tosty"],"Question6-3":null,"Question6-4":null,"Question6-5":null},"Question6-6":null},"Question7":{"Question7-0":"12","Question7-1":"test"},"Question8":{"Question8-0":null,"Question8-1":null},"Question9":{"Question9-0":"Yes","Question9-1":null},"Question10":{"Question10-0":null,"Question10-3":null},"Question11":{"Question11-0":null,"Question11-1":null},"Question12":{"Question12-0":null,"Question12-1":null},"Question13":{"Question13-0":null,"Question13-1":null},"Question14":{"Question14-0":null,"Question14-3":null},"Question15":{"Question15-0":null,"Question15-1":null},"Question16":{"Question16-0":null,"Question16-1":null},"Question17":{"Question17-0":null,"Question17-1":null},"Question18":{"Question18-0":null,"Question18-3":null},"Question19":{"Question19-0":null,"Question19-1":null},"Question20":{"Question20-0":null,"Question20-1":null},"Question21":{"Question21-0":null,"Question21-1":null},"Question22":{"Question22-0":null,"Question22-3":null},"Question23":{"Question23-0":null,"Question23-1":null},"Question24":{"Question24-0":null,"Question24-1":null},"Question25":{"Question25-0":null,"Question25-1":null},"Question26":{"Question26-0":null,"Question26-3":null},"Question27":{"Question27-0":null,"Question27-1":null},"Question28":{"Question28-0":null,"Question28-1":null},"Question29":{"Question29-0":null,"Question29-1":null},"Question30":{"Question30-0":null,"Question30-3":null},"Question31":{"Question31-0":null,"Question31-1":null},"Question32":{"Question32-0":null,"Question32-1":null},"Question33":{"Question33-0":null,"Question33-1":null},"Question34":{"Question34-0":null,"Question34-3":null},"Question35":{"Question35-0":null,"Question35-1":null},"Question36":{"Question36-0":null,"Question36-1":null},"Question37":{"Question37-0":null,"Question37-1":null},"Question38":{"Question38-0":null,"Question38-3":null},"Question39":{"Question39-0":null,"Question39-1":null},"Question40":{"Question40-0":null,"Question40-1":null},"Question41":{"Question41-0":null,"Question41-1":null},"Question42":{"Question42-0":null,"Question42-3":null},"Question43":{"Question43-0":null,"Question43-1":null},"Question44":{"Question44-0":null,"Question44-1":null},"Question45":{"Question45-0":null,"Question45-1":null},"Question46":{"Question46-0":null,"Question46-3":null},"Question47":{"Question47-0":null,"Question47-1":null},"Question48":{"Question48-0":null,"Question48-1":null},"Question49":{"Question49-0":null,"Question49-1":null},"Question50":{"Question50-0":null,"Question50-3":null},"Question51":{"Question51-0":null,"Question51-1":null},"Question52":{"Question52-0":null,"Question52-1":null},"Question53":{"Question53-0":null,"Question53-1":null}},"Feedback":{"Question102":null},"General":{"Question1":{"Question1-0":null,"Question1-1":"No","Question1-1-1":"12","Question1-2":null},"Question2":{"Question2-0":"","Question2-1":"etst"},"Question3":{"Question3-0":"123","Question3-1":null},"Question4":{"Question4-0":null,"Question4-1":null},"Question5":{"Question5-0":null,"Question5-1":null}}},"metadata":{"creationDate":"2022-10-27T11:47:56.475+00:00","createdBy":"j.balasis92@gmail.com","modificationDate":"2023-03-01T10:07:55.665+00:00","modifiedBy":"j.balasis92@gmail.com"},"history":{"entries":[{"userId":"j.balasis92@gmail.com","time":1666871276475,"action":"CREATED"},{"userId":"j.balasis92@gmail.com","time":1670424103054,"action":"UPDATED"},{"userId":"j.balasis92@gmail.com","time":1670424243343,"action":"UPDATED"},{"userId":"j.balasis92@gmail.com","time":1670494450522,"action":"UPDATED"},{"userId":"j.balasis92@gmail.com","time":1670857855044,"action":"UPDATED"},{"userId":"j.balasis92@gmail.com","time":1670923703281,"action":"UPDATED"},{"userId":"j.balasis92@gmail.com","time":1671117650213,"action":"UPDATED"},{"userId":"j.balasis92@gmail.com","time":1671203172499,"action":"UPDATED"},{"userId":"spyroukon@gmail.com","time":1671705076245,"action":"UPDATED"},{"userId":"spyroukon@gmail.com","time":1671705098670,"action":"UPDATED"},{"userId":"spyroukon@gmail.com","time":1671705115043,"action":"UPDATED"},{"userId":"spyroukon@gmail.com","time":1671717707057,"action":"UPDATED"},{"userId":"spyroukon@gmail.com","time":1671717849739,"action":"UPDATED"},{"userId":"j.balasis92@gmail.com","time":1671809841538,"action":"UPDATED"},{"userId":"j.balasis92@gmail.com","time":1673861921221,"action":"UPDATED"},{"userId":"j.balasis92@gmail.com","time":1673861928104,"action":"UPDATED"},{"userId":"j.balasis92@gmail.com","time":1674055708535,"action":"UPDATED"},{"userId":"j.balasis92@gmail.com","time":1677243120280,"action":"UPDATED"},{"userId":"j.balasis92@gmail.com","time":1677243166033,"action":"UPDATED"},{"userId":"j.balasis92@gmail.com","time":1677665275665,"action":"UPDATED"}]},"validated":false,"published":false};
  surveyAnswerB: SurveyAnswer = {"id":"sa-OFlEdXww","surveyId":"m-jJFKmsXb","stakeholderId":"sh-country-FR","type":"country","answer":{},"metadata":{"creationDate":"2023-01-17T14:04:45.897+00:00","createdBy":"j.balasis92@gmail.com","modificationDate":"2023-01-17T14:04:45.897+00:00","modifiedBy":"j.balasis92@gmail.com"},"history":{"entries":[{"userId":"j.balasis92@gmail.com","time":1673964285897,"action":"CREATED"}]},"validated":false,"published":false};

  tabsHeader: string = null;
  ready = false;

  surveyId = 'm-jJFKmsXb';

  constructor(private surveyService: SurveyService) {
  }

  ngOnInit() {
    this.ready = false;
    this.tabsHeader = 'Sections';

    zip(
      this.surveyService.getSurvey(this.surveyId)).subscribe(
      next => {
        this.model = next[0];
      },
      error => {console.log(error)},
      () => {this.ready = true;}
    )
  }
}
